<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <style>
      .social-icon {
        width: 30px;
        height: 30px;
        margin: 5px;
      }
    </style>
  </head>

  <body>
    <a-scene
      mindar-image="imageTargetSrc: targets.mind; filterMinCF: 0.001; filterBeta: 0.01; warmupTolerance: 5; missTolerance: 5;"
      color-space="sRGB"
      renderer="colorManagement: true, physicallyCorrectLights"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
    >
      <a-assets>
        <!-- Preload the video -->
        <video id="promo-video" src="./Ambio Promo.mp4" preload="auto" crossorigin="anonymous" webkit-playsinline playsinline></video>
        
        <!-- Add social media icons -->
        <img id="linkedin-icon" src="./path-to-linkedin-icon.png" crossorigin="anonymous">
        <img id="instagram-icon" src="./path-to-instagram-icon.png" crossorigin="anonymous">
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <a-entity mindar-image-target="targetIndex: 0">

        <!-- GLB model ABOVE the card -->
        <a-entity
          gltf-model="./model.glb"
          position="0 0.65 0.01"
          scale="0.2 0.2 0.2" 
          rotation="90 0 0"
        ></a-entity>

        <!-- Contact and Email side by side ABOVE the card -->
        <a-entity position="0.85 0.65 0.01">
          <a-text value="Contact:" position="0 0 0" width="1" color="white" align="left" scale="0.5 0.5 0.5"></a-text>
          <a-text value="Phone: +1 234 567 8900" position="0 -0.07 0" width="1" color="white" align="left" scale="0.5 0.5 0.5"></a-text>
        </a-entity>

        <a-entity position="1.15 0.65 0.01">
          <a-text value="Email:" position="0 0 0" width="1" color="white" align="left" scale="0.5 0.5 0.5"></a-text>
          <a-text value="info@emodev.tech" position="0 -0.07 0" width="1" color="white" align="left" scale="0.5 0.5 0.5"></a-text>
        </a-entity>

        <!-- Video on the left side of the target -->
        <a-video
          id="promo-video-entity"
          src="#promo-video"
          position="-0.75 0.65 0.01"
          width="0.8"
          height="0.7"
          autoplay="false"
          loop="true"
          muted="false"
          playsinline
          webkit-playsinline
        ></a-video>

        <a-entity position="0.0 0.35 0.01">
          <a-image 
            src="#linkedin-icon" 
            position="0.03 0 0" 
            width="0.05" 
            height="0.05" 
            material="color: white"
            class="clickable"
            data-url="https://linkedin.com/company/your-company"
          ></a-image>
          <a-image 
            src="#instagram-icon" 
            position="0.09 0 0" 
            width="0.05" 
            height="0.05" 
            material="color: white"
            class="clickable"
            data-url="https://instagram.com/your-account"
          ></a-image>
        </a-entity>

      </a-entity>
    </a-scene>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const videoEl = document.querySelector("#promo-video");
        const sceneEl = document.querySelector("a-scene");

        // Add cursor and raycaster for interaction
        const camera = document.querySelector('a-camera');
        if (!camera.hasAttribute('cursor')) {
          camera.setAttribute('cursor', {
            rayOrigin: 'mouse',
            fuse: false
          });
        }
        if (!camera.hasAttribute('raycaster')) {
          camera.setAttribute('raycaster', {
            objects: '.clickable'
          });
        }

        // Add click event listeners to social media icons
        const clickableElements = document.querySelectorAll('.clickable');
        clickableElements.forEach(element => {
          element.addEventListener('click', function() {
            const url = this.getAttribute('data-url');
            if (url) {
              window.open(url, '_blank');
            }
          });
        });

        sceneEl.addEventListener("targetFound", () => {
          console.log("Target found! Playing video...");
          videoEl.play();
        });

        sceneEl.addEventListener("targetLost", () => {
          console.log("Target lost! Pausing video...");
          videoEl.pause();
          videoEl.currentTime = 0; // Reset to start
        });
      });
    </script>
  </body>
</html>
